!function(S){S.jqplot.LogAxisRenderer=function(){S.jqplot.LinearAxisRenderer.call(this),this.axisDefaults={base:10,tickDistribution:"power"}},S.jqplot.LogAxisRenderer.prototype=new S.jqplot.LinearAxisRenderer,S.jqplot.LogAxisRenderer.prototype.constructor=S.jqplot.LogAxisRenderer,S.jqplot.LogAxisRenderer.prototype.init=function(t){for(var e in this.drawBaseline=!0,this.minorTicks="auto",this._scalefact=1,S.extend(!0,this,t),this._autoFormatString="%d",this._overrideFormatString=!1,this.renderer.axisDefaults)null==this[e]&&(this[e]=this.renderer.axisDefaults[e]);this.resetDataBounds()},S.jqplot.LogAxisRenderer.prototype.createTicks=function(t){this._ticks;var e,i,s,a=this.ticks,h=(this.name,this._dataBounds),r="x"===this.name.charAt(0)?this._plotDimensions.width:this._plotDimensions.height;if(this._scalefact=(Math.max(r,31)-30)/300,a.length){for(p=0;p<a.length;p++){var n=a[p],o=new this.tickRenderer(this.tickOptions);n.constructor==Array?(o.value=n[0],o.label=n[1],this.showTicks?this.showTickMarks||(o.showMark=!1):(o.showLabel=!1,o.showMark=!1),o.setTick(n[0],this.name)):S.isPlainObject(n)?(S.extend(!0,o,n),o.axis=this.name):(o.value=n,this.showTicks?this.showTickMarks||(o.showMark=!1):(o.showLabel=!1,o.showMark=!1),o.setTick(n,this.name)),this._ticks.push(o)}this.numberTicks=a.length,this.min=this._ticks[0].value,this.max=this._ticks[this.numberTicks-1].value}else if(null==this.min&&null==this.max){if((e=h.min*(2-this.padMin))==(i=h.max*this.padMax)){e*=.95,i*=1.05}if(null!=this.min&&this.min<=0)throw new Error("Log axis minimum must be greater than 0");if(null!=this.max&&this.max<=0)throw new Error("Log axis maximum must be greater than 0");var l,c;l=Math.pow(this.base,Math.floor(Math.log(e)/Math.log(this.base))),c=Math.pow(this.base,Math.ceil(Math.log(i)/Math.log(this.base))),0===l&&(l=1);var m=Math.round(Math.log(l)/Math.LN10);null!=this.tickOptions&&this.tickOptions.formatString||(this._overrideFormatString=!0),this.min=l,this.max=c;this.max,this.min;var u,g,k,_,x="auto"===this.minorTicks?0:this.minorTicks;if(null==this.numberTicks)if(140<r){if((u=Math.round(Math.log(this.max/this.min)/Math.log(this.base)+1))<2&&(u=2),0===x)x=(d=r/(u-1))<100?0:d<190?1:d<250?3:d<600?4:9}else u=2,0===x&&(x=1),x=0;else u=this.numberTicks;if(0<=m&&3!==x)this._autoFormatString="%d";else if(m<=0&&3===x){var d=-(m-1);this._autoFormatString="%."+Math.abs(m-1)+"f"}else if(m<0){d=-m;this._autoFormatString="%."+Math.abs(m)+"f"}else this._autoFormatString="%d";for(var p=0;p<u;p++)if(s=Math.pow(this.base,p-u+1)*this.max,o=new this.tickRenderer(this.tickOptions),this._overrideFormatString&&(o.formatString=this._autoFormatString),this.showTicks?this.showTickMarks||(o.showMark=!1):(o.showLabel=!1,o.showMark=!1),o.setTick(s,this.name),this._ticks.push(o),x&&p<u-1){(k=Math.pow(this.base,p-u+2)*this.max)-s,_=k/(x+1);for(var f=x-1;0<=f;f--)g=k-_*(f+1),o=new this.tickRenderer(this.tickOptions),this._overrideFormatString&&""!=this._autoFormatString&&(o.formatString=this._autoFormatString),this.showTicks?this.showTickMarks||(o.showMark=!1):(o.showLabel=!1,o.showMark=!1),o.setTick(g,this.name),this._ticks.push(o)}}else if(null!=this.min&&null!=this.max){var w,M,b=S.extend(!0,{},this.tickOptions,{name:this.name,value:null});if(null==this.numberTicks&&null==this.tickInterval){var v=Math.max(r,31),R=Math.ceil((v-30)/35+1),T=S.jqplot.LinearTickGenerator.bestConstrainedInterval(this.min,this.max,R);this._autoFormatString=T[3],w=T[2],M=T[4];for(p=0;p<w;p++)b.value=this.min+p*M,o=new this.tickRenderer(b),this._overrideFormatString&&""!=this._autoFormatString&&(o.formatString=this._autoFormatString),this.showTicks?this.showTickMarks||(o.showMark=!1):(o.showLabel=!1,o.showMark=!1),this._ticks.push(o)}else if(null!=this.numberTicks&&null!=this.tickInterval){w=this.numberTicks;for(p=0;p<w;p++)b.value=this.min+p*this.tickInterval,o=new this.tickRenderer(b),this._overrideFormatString&&""!=this._autoFormatString&&(o.formatString=this._autoFormatString),this.showTicks?this.showTickMarks||(o.showMark=!1):(o.showLabel=!1,o.showMark=!1),this._ticks.push(o)}}},S.jqplot.LogAxisRenderer.prototype.pack=function(t,e){var i=parseInt(this.base,10),s=this._ticks,a=function(t){return Math.log(t)/Math.log(i)},h=function(t){return Math.pow(Math.E,Math.log(i)*t)},r=a(this.max),n=a(this.min),o=e.max,l=e.min,c=null!=this._label&&this._label.show;for(var m in t)this._elem.css(m,t[m]);this._offsets=e;var u=o-l,g=r-n;if(this.p2u=function(t){return h((t-l)*g/u+n)},this.u2p=function(t){return(a(t)-n)*u/g+l},"xaxis"==this.name||"x2axis"==this.name?(this.series_u2p=function(t){return(a(t)-n)*u/g},this.series_p2u=function(t){return h(t*g/u+n)}):(this.series_u2p=function(t){return(a(t)-r)*u/g},this.series_p2u=function(t){return h(t*g/u+r)}),this.show)if("xaxis"==this.name||"x2axis"==this.name){for(var k=0;k<s.length;k++){if((d=s[k]).show&&d.showLabel){if(d.constructor==S.jqplot.CanvasAxisTickRenderer&&d.angle)switch(d.labelPosition){case"auto":p=d.angle<0?-d.getWidth()+d._textRenderer.height*Math.sin(-d._textRenderer.angle)/2:-d._textRenderer.height*Math.sin(d._textRenderer.angle)/2;break;case"end":p=-d.getWidth()+d._textRenderer.height*Math.sin(-d._textRenderer.angle)/2;break;case"start":p=-d._textRenderer.height*Math.sin(d._textRenderer.angle)/2;break;case"middle":default:p=-d.getWidth()/2+d._textRenderer.height*Math.sin(-d._textRenderer.angle)/2}else p=-d.getWidth()/2;var _=this.u2p(d.value)+p+"px";d._elem.css("left",_),d.pack()}}if(c){var x=this._label._elem.outerWidth(!0);this._label._elem.css("left",l+u/2-x/2+"px"),"xaxis"==this.name?this._label._elem.css("bottom","0px"):this._label._elem.css("top","0px"),this._label.pack()}}else{for(k=0;k<s.length;k++){var d;if((d=s[k]).show&&d.showLabel){var p;if(d.constructor==S.jqplot.CanvasAxisTickRenderer&&d.angle)switch(d.labelPosition){case"auto":case"end":p=d.angle<0?-d._textRenderer.height*Math.cos(-d._textRenderer.angle)/2:-d.getHeight()+d._textRenderer.height*Math.cos(d._textRenderer.angle)/2;break;case"start":p=0<d.angle?-d._textRenderer.height*Math.cos(-d._textRenderer.angle)/2:-d.getHeight()+d._textRenderer.height*Math.cos(d._textRenderer.angle)/2;break;case"middle":default:p=-d.getHeight()/2}else p=-d.getHeight()/2;_=this.u2p(d.value)+p+"px";d._elem.css("top",_),d.pack()}}if(c){var f=this._label._elem.outerHeight(!0);this._label._elem.css("top",o-u/2-f/2+"px"),"yaxis"==this.name?this._label._elem.css("left","0px"):this._label._elem.css("right","0px"),this._label.pack()}}}}(jQuery);