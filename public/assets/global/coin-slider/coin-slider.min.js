!function(f){var p=new Array,h=new Array,n=new Array,s=new Array,d=new Array,a=new Array,e=new Array,o=new Array,r=new Array,c=new Array,l=new Array;f.fn.coinslider=f.fn.CoinSlider=function(t){init=function(e){h[e.id]=new Array,n[e.id]=new Array,s[e.id]=new Array,d[e.id]=new Array,a[e.id]=new Array,o[e.id]=0,c[e.id]=0,l[e.id]=1,p[e.id]=f.extend({},f.fn.coinslider.defaults,t),f.each(f("#"+e.id+" img"),function(i,t){n[e.id][i]=f(t).attr("src"),s[e.id][i]=f(t).parent().is("a")?f(t).parent().attr("href"):"",d[e.id][i]=f(t).parent().is("a")?f(t).parent().attr("target"):"",a[e.id][i]=f(t).next().is("span")?f(t).next().html():"",f(t).hide(),f(t).next().hide()}),f(e).css({"background-image":"url("+n[e.id][0]+")",width:p[e.id].width,height:p[e.id].height,position:"relative","background-position":"top left"}).wrap("<div class='coin-slider' id='coin-slider-"+e.id+"' />"),f("#"+e.id).append("<div class='cs-title' id='cs-title-"+e.id+"' style='position: absolute; bottom:0; left: 0; z-index: 1000;'></div>"),f.setFields(e),p[e.id].navigation&&f.setNavigation(e),f.transition(e,0),f.transitionCall(e)},f.setFields=function(t){for(tWidth=sWidth=parseInt(p[t.id].width/p[t.id].spw),tHeight=sHeight=parseInt(p[t.id].height/p[t.id].sph),counter=sLeft=sTop=0,tgapx=gapx=p[t.id].width-p[t.id].spw*sWidth,tgapy=gapy=p[t.id].height-p[t.id].sph*sHeight,i=1;i<=p[t.id].sph;i++){for(gapx=tgapx,0<gapy?(gapy--,sHeight=tHeight+1):sHeight=tHeight,j=1;j<=p[t.id].spw;j++)0<gapx?(gapx--,sWidth=tWidth+1):sWidth=tWidth,h[t.id][counter]=i+""+j,counter++,p[t.id].links?f("#"+t.id).append("<a href='"+s[t.id][0]+"' class='cs-"+t.id+"' id='cs-"+t.id+i+j+"' style='width:"+sWidth+"px; height:"+sHeight+"px; float: left; position: absolute;'></a>"):f("#"+t.id).append("<div class='cs-"+t.id+"' id='cs-"+t.id+i+j+"' style='width:"+sWidth+"px; height:"+sHeight+"px; float: left; position: absolute;'></div>"),f("#cs-"+t.id+i+j).css({"background-position":-sLeft+"px "+-sTop+"px",left:sLeft,top:sTop}),sLeft+=sWidth;sTop+=sHeight,sLeft=0}f(".cs-"+t.id).mouseover(function(){f("#cs-navigation-"+t.id).show()}),f(".cs-"+t.id).mouseout(function(){f("#cs-navigation-"+t.id).hide()}),f("#cs-title-"+t.id).mouseover(function(){f("#cs-navigation-"+t.id).show()}),f("#cs-title-"+t.id).mouseout(function(){f("#cs-navigation-"+t.id).hide()}),p[t.id].hoverPause&&(f(".cs-"+t.id).mouseover(function(){p[t.id].pause=!0}),f(".cs-"+t.id).mouseout(function(){p[t.id].pause=!1}),f("#cs-title-"+t.id).mouseover(function(){p[t.id].pause=!0}),f("#cs-title-"+t.id).mouseout(function(){p[t.id].pause=!1}))},f.transitionCall=function(i){clearInterval(e[i.id]),delay=p[i.id].delay+p[i.id].spw*p[i.id].sph*p[i.id].sDelay,e[i.id]=setInterval(function(){f.transition(i)},delay)},f.transition=function(i,t){1!=p[i.id].pause&&(f.effect(i),c[i.id]=0,r[i.id]=setInterval(function(){f.appereance(i,h[i.id][c[i.id]])},p[i.id].sDelay),f(i).css({"background-image":"url("+n[i.id][o[i.id]]+")"}),void 0===t?o[i.id]++:"prev"==t?o[i.id]--:o[i.id]=t,o[i.id]==n[i.id].length&&(o[i.id]=0),-1==o[i.id]&&(o[i.id]=n[i.id].length-1),f(".cs-button-"+i.id).removeClass("cs-active"),f("#cs-button-"+i.id+"-"+(o[i.id]+1)).addClass("cs-active"),a[i.id][o[i.id]]?(f("#cs-title-"+i.id).css({opacity:0}).animate({opacity:p[i.id].opacity},p[i.id].titleSpeed),f("#cs-title-"+i.id).html(a[i.id][o[i.id]])):f("#cs-title-"+i.id).css("opacity",0))},f.appereance=function(i,t){f(".cs-"+i.id).attr("href",s[i.id][o[i.id]]).attr("target",d[i.id][o[i.id]]),c[i.id]!=p[i.id].spw*p[i.id].sph?(f("#cs-"+i.id+t).css({opacity:0,"background-image":"url("+n[i.id][o[i.id]]+")"}),f("#cs-"+i.id+t).animate({opacity:1},300),c[i.id]++):clearInterval(r[i.id])},f.setNavigation=function(e){for(f(e).append("<div id='cs-navigation-"+e.id+"'></div>"),f("#cs-navigation-"+e.id).hide(),f("#cs-navigation-"+e.id).append("<a href='#' id='cs-prev-"+e.id+"' class='cs-prev'>prev</a>"),f("#cs-navigation-"+e.id).append("<a href='#' id='cs-next-"+e.id+"' class='cs-next'>next</a>"),f("#cs-prev-"+e.id).css({position:"absolute",top:p[e.id].height/2-15,left:0,"z-index":1001,"line-height":"30px",opacity:p[e.id].opacity}).click(function(i){i.preventDefault(),f.transition(e,"prev"),f.transitionCall(e)}).mouseover(function(){f("#cs-navigation-"+e.id).show()}),f("#cs-next-"+e.id).css({position:"absolute",top:p[e.id].height/2-15,right:0,"z-index":1001,"line-height":"30px",opacity:p[e.id].opacity}).click(function(i){i.preventDefault(),f.transition(e),f.transitionCall(e)}).mouseover(function(){f("#cs-navigation-"+e.id).show()}),f("<div id='cs-buttons-"+e.id+"' class='cs-buttons'></div>").appendTo(f("#coin-slider-"+e.id)),k=1;k<n[e.id].length+1;k++)f("#cs-buttons-"+e.id).append("<a href='#' class='cs-button-"+e.id+"' id='cs-button-"+e.id+"-"+k+"'>"+k+"</a>");f.each(f(".cs-button-"+e.id),function(t,i){f(i).click(function(i){f(".cs-button-"+e.id).removeClass("cs-active"),f(this).addClass("cs-active"),i.preventDefault(),f.transition(e,t),f.transitionCall(e)})}),f("#cs-navigation-"+e.id+" a").mouseout(function(){f("#cs-navigation-"+e.id).hide(),p[e.id].pause=!1}),f("#cs-buttons-"+e.id).css({left:"50%","margin-left":15*-n[e.id].length/2-5,position:"relative"})},f.effect=function(t){if(effA=["random","swirl","rain","straight"],""==p[t.id].effect?eff=effA[Math.floor(Math.random()*effA.length)]:eff=p[t.id].effect,h[t.id]=new Array,"random"==eff){for(counter=0,i=1;i<=p[t.id].sph;i++)for(j=1;j<=p[t.id].spw;j++)h[t.id][counter]=i+""+j,counter++;f.random(h[t.id])}"rain"==eff&&f.rain(t),"swirl"==eff&&f.swirl(t),"straight"==eff&&f.straight(t),l[t.id]*=-1,0<l[t.id]&&h[t.id].reverse()},f.random=function(i){var t=i.length;if(0==t)return!1;for(;--t;){var e=Math.floor(Math.random()*(t+1)),n=i[t],s=i[e];i[t]=s,i[e]=n}},f.swirl=function(t){for(var e=p[t.id].sph,n=p[t.id].spw,s=1,d=1,a=0,o=0,r=0,c=!0;c;){for(o=0==a||2==a?n:e,i=1;i<=o;i++)if(h[t.id][r]=s+""+d,r++,i!=o)switch(a){case 0:d++;break;case 1:s++;break;case 2:d--;break;case 3:s--}switch(a=(a+1)%4){case 0:n--,d++;break;case 1:e--,s++;break;case 2:n--,d--;break;case 3:e--,s--}check=f.max(e,n)-f.min(e,n),n<=check&&e<=check&&(c=!1)}},f.rain=function(t){for(var e=p[t.id].sph,n=p[t.id].spw,s=0,d=to2=from=1,a=!0;a;){for(i=from;i<=d;i++)h[t.id][s]=i+""+parseInt(to2-i+1),s++;to2++,d<e&&to2<n&&e<n&&d++,d<e&&n<=e&&d++,to2>n&&from++,from>d&&(a=!1)}},f.straight=function(t){for(counter=0,i=1;i<=p[t.id].sph;i++)for(j=1;j<=p[t.id].spw;j++)h[t.id][counter]=i+""+j,counter++},f.min=function(i,t){return t<i?t:i},f.max=function(i,t){return i<t?t:i},this.each(function(){init(this)})},f.fn.coinslider.defaults={width:565,height:290,spw:7,sph:5,delay:3e3,sDelay:30,opacity:.7,titleSpeed:500,effect:"",navigation:!0,links:!0,hoverPause:!0}}(jQuery);